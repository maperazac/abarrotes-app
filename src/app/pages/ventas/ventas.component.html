<div class="bg-light px-3 pt-3">
  <form (submit)="agregarProductoVentaActual(buscarProducto.palabraClave)">
    <div>
      <div class="input-group w-50">
        <input type="text" class="form-control" [(ngModel)] = "buscarProducto.palabraClave" name="codigoDeProducto" id="codigoDeProducto" #codigoDeProducto placeholder="Código del producto" aria-label="Código del producto" aria-describedby="button-addon2" autocomplete="off">
        <div class="input-group-append">
          <button class="btn btn-success" (click)="agregarProductoVentaActual(buscarProducto.palabraClave)" type="button" id="button-addon2">Agregar producto</button>
        </div>
      </div>
    </div>
  </form>
</div>

<app-ventas-navbar (evento)="procesarEvento($event)"></app-ventas-navbar>

<div   class="animated fadeIn faster" style="min-height: calc(100vh - 297px); display: flex; flex-direction: column;">
  <!-- <div class="bg-light p-3">
    <form (submit)="agregarProductoVentaActual(buscarProducto.palabraClave)">
      <div>
        <div class="input-group w-50">
          <input type="text" class="form-control" [(ngModel)] = "buscarProducto.palabraClave" name="codigoDeProducto" id="codigoDeProducto" #codigoDeProducto placeholder="Código del producto" aria-label="Código del producto" aria-describedby="button-addon2" autocomplete="off">
          <div class="input-group-append">
            <button class="btn btn-success" (click)="agregarProductoVentaActual(buscarProducto.palabraClave)" type="button" id="button-addon2">Agregar producto</button>
          </div>
        </div>
      </div>
    </form>
  </div> -->
  <table class="table mb-0">
    <thead class="thead-light">
      <tr>
        <th scope="col" style="width:15%" class="text-center">Código de barras</th>
        <th scope="col" style="width:25%">Descripción</th>
        <th scope="col" style="width:15%" class="text-center">Precio venta</th>
        <th scope="col" style="width:15%" class="text-center">Cantidad</th>
        <th scope="col" style="width:15%" class="text-center">Importe</th>
        <th scope="col" style="width:15%" class="text-center">Existencia</th>
      </tr>
    </thead>
  </table>
  <div style="height: calc(100vh - 451px); overflow-y: auto; border-bottom: solid 1px gainsboro;">
    <div *ngFor="let producto of productosVentaActual; let i = index" class="animated fadeIn faster">
      <input (change)="selectRow(producto.codigoDeBarras)" class="form-check-input" type="radio" name="exampleRadios" [id]=producto.codigoDeBarras [value]=producto.codigoDeBarras checked>
      <div class="radio-productos-venta"  [ngClass]="i % 2 === 0 ? 'even' : 'odd'">
        <label [for]=producto.codigoDeBarras class="form-check-label w-100">
          <label class="form-check-label text-center" [for]=producto.codigoDeBarras  style="width:15%; padding: .5rem; border-right: solid 1px #fff;">
            <div class="d-flex overflow-hidden" style="text-wrap: nowrap;">{{producto.codigoDeBarras}}</div>
          </label>
          <label class="form-check-label" [for]=producto.codigoDeBarras style="width:25%; padding: .5rem; border-right: solid 1px #fff;">
            <div class="d-flex overflow-hidden" style="text-wrap: nowrap;">{{producto.descripcion}}</div>
          </label>
          <label class="form-check-label text-center" [for]=producto.codigoDeBarras style="width:15%; padding: .5rem; border-right: solid 1px #fff;">{{producto.precioVenta | currency: '$'}}</label>
          <label class="form-check-label" [for]=producto.codigoDeBarras style="width:15%; padding: 0 .5rem;">
            <div class="btn-group-sm d-flex justify-content-between" role="group">
              <button tabindex="-1" type="button" class="btn btn-secondary btn-outline-light" (click)="restarCantidad(producto.codigoDeBarras)"><i class="fa fa-minus"></i></button>
              <button tabindex="-1" type="button" class="btnCantidad">{{producto.cantidad}}</button>
              <button tabindex="-1" type="button" class="btn btn-secondary btn-outline-light" (click)="agregarCantidad(producto.codigoDeBarras)"><i class="fa fa-plus"></i></button>
            </div>
          </label>
          <label class="form-check-label text-right" [for]=producto.codigoDeBarras style="width:15%; padding: .5rem; border-right: solid 1px #fff;  border-left: solid 1px #fff;">
            <strong>{{producto.precioVenta * producto.cantidad | currency: '$'}}</strong>
          </label>
        </label>
      </div>
    </div>
  </div>
  <footer class="footer" style="margin-top:auto;">
      <app-ventas-footer></app-ventas-footer>
  </footer>
</div>

<div style="display: none;"> 
  <div #myAlert>
    <app-buscar-productos></app-buscar-productos>    
  </div>
</div>
